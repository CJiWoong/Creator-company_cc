<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC	"-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="kr.co.cc.project.dao.ProjectDAO">
<<<<<<< HEAD
	<insert
	   useGeneratedKeys="true"
		keyColumn="project_id"
		keyProperty="project_id"
	    id="write" parameterType="kr.co.cc.project.dto.ProjectDTO">
	    INSERT INTO project (name, member_id, public_range, priod, deadlinepriod, step, status)
	    VALUES (#{name}, #{member_id}, #{public_range}, #{priod}, #{deadlinepriod}, '기획', '준비중')
	</insert>

    
    <insert id="addContributor" parameterType="java.util.Map">
        INSERT INTO contributor (project_id, member_id)
        VALUES (#{param1}, #{param2})
    </insert>	
=======

	<insert  id="write" parameterType="kr.co.cc.project.dto.ProjectDTO">
		INSERT INTO
		project(name,member_id,public_range,priod,deadlinepriod,step,status)
		VALUES(#{name},#{member_id},#{public_range},#{priod},#{deadlinepriod},'기획','준비중')
	</insert>	
>>>>>>> origin/master
	
	<select id="list" resultType="kr.co.cc.project.dto.ProjectDTO">
	  SELECT p.project_id, p.name, p.start_date, p.step, GROUP_CONCAT(c.member_id SEPARATOR ',') AS contributors
	  FROM project p
	  LEFT JOIN contributor c ON p.project_id = c.project_id
	  GROUP BY p.project_id, p.name, p.start_date, p.step
	</select>

	
		<select id="detail" parameterType="int" resultType="kr.co.cc.project.dto.ProjectDTO">
		    SELECT *
		    FROM project
		    WHERE project_id = #{id}
		</select>

																							
</mapper>


